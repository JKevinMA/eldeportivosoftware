<div class="row">
    <div class="col-md-12">

        <div class="card card-primary">
            <div class="card-header">
                <h3 class="card-title">
                    Orden de Pedido
                </h3>
            </div>
            <div class="card-body p-0 ">
                <div class="tab-content table-responsive">
                    <div class="p-3" style="display: flex; justify-content:end;align-items: center;">
                        <p *ngIf="invalido" style="color:rgb(189, 29, 29);font-size: 0.8rem;padding: 0;margin:0;margin-right: 10px;">* Campo inválido, se solicita que ingrese solo caracteres alfabéticos</p>
                        <label for="distrito">Distrito:</label>
                            <input style="width: 200px;" [(ngModel)]="busqueda" type="text" (keypress)="validar($event)" (keydown.backspace)="borrarBusqueda()" class="form-control ml-2 "[class.is-invalid]="invalido" id="distrito" placeholder="Tarma">
                        <button (click)="buscarOrdenPedido()" class="btn btn-primary ml-2">
                            <i class="fas fa-search"></i>
                            &nbsp;&nbsp;Buscar
                        </button>
                    </div>
                    <div class="table-responsive">
                        <table class="table table-sm">
                            <thead>
                                <tr>
                                    <th>Nro Orden P.</th>
                                    <th>Cliente</th>
                                    <th>Direccion</th>
                                    <th>Teléfono</th>
                                    <th>Descripcion prenda</th>
                                    <th>Talla</th>
                                    <th>Cantidad</th>
                                    <th>F. Creación</th>
                                    <th>F. Entrega</th>
                                    <th>Estado</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                <ng-container *ngFor="let pedido of pedidosFiltrados">
                                    <tr *ngFor="let item of pedido.detalles;let i =index">
                                        <td style="vertical-align: middle" *ngIf="i==0" [rowSpan]="pedido.detalles.length">{{pedido.idOrdenPedido}}</td>
                                        <td style="vertical-align: middle" *ngIf="i==0" [rowSpan]="pedido.detalles.length">{{pedido.nombres}}</td>
                                        <td style="vertical-align: middle" *ngIf="i==0" [rowSpan]="pedido.detalles.length">{{pedido.direccion}}</td>
                                        <td style="vertical-align: middle" *ngIf="i==0" [rowSpan]="pedido.detalles.length">{{pedido.telefono}}</td>
                                        <td style="padding-left:0;">{{item.prenda}}</td>
                                        <td style="padding-left:0;">{{item.talla}}</td>
                                        <td style="padding-left:0;">{{item.cantidad}}</td>
                                        <td style="vertical-align: middle" *ngIf="i==0" [rowSpan]="pedido.detalles.length">{{pedido.fechaRecepcion | date:'dd-MM-yyyy'}}</td>
                                        <td style="vertical-align: middle" *ngIf="i==0" [rowSpan]="pedido.detalles.length">{{pedido.fechaEntrega | date:'dd-MM-yyyy'}}</td>
                                        <td style="vertical-align: middle" *ngIf="i==0" [rowSpan]="pedido.detalles.length">{{pedido.estado}}</td>
                                        <td style="vertical-align: middle" *ngIf="i==0" [rowSpan]="pedido.detalles.length" (change)="pedido.seleccionado= !pedido.seleccionado"><input type="checkbox"></td>
                                    </tr>
                                </ng-container>
                               
                            </tbody>
                        </table>
                        
                    </div>
                    
                    <div class="p-3" style="display: flex; justify-content:end;align-items: center;">
                        <button [disabled]="pedidosFiltrados.length==0" (click)="agregarOrdenPedido()" class="btn btn-primary">
                            <i class="fas fa-plus"></i>
                            &nbsp;&nbsp;Añadir
                        </button>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>